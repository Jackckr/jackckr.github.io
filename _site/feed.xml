<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.7.4">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2018-10-08T01:02:04+08:00</updated><id>http://localhost:4000/</id><title type="html">Conanâ€™s zone</title><subtitle>To learn and to known why</subtitle><author><name>Conan</name></author><entry><title type="html">åˆ©ç”¨jekyll+github pagesæ­å»ºä¸ªäººåšå®¢æ€»ç»“</title><link href="http://localhost:4000/jekyll/%E5%88%A9%E7%94%A8jekyll+github-pages%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%80%BB%E7%BB%93/" rel="alternate" type="text/html" title="åˆ©ç”¨jekyll+github pagesæ­å»ºä¸ªäººåšå®¢æ€»ç»“" /><published>2018-10-07T00:00:00+08:00</published><updated>2018-10-07T00:00:00+08:00</updated><id>http://localhost:4000/jekyll/%E5%88%A9%E7%94%A8jekyll+github%20pages%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%80%BB%E7%BB%93</id><content type="html" xml:base="http://localhost:4000/jekyll/%E5%88%A9%E7%94%A8jekyll+github-pages%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%80%BB%E7%BB%93/">&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;èƒŒæ™¯&lt;/h1&gt;

&lt;p&gt;åšä¸»ä¸€ç›´æƒ³æ­å»ºä¸€ä¸ªå¯ä»¥è‡ªä¸»ç®¡ç†çš„åšå®¢ï¼Œç„¶åå»ç½‘ä¸Šæœäº†ä¸€ä¸‹åï¼Œå‘ç°GitHub pageså°±æä¾›è¿™æ ·ä¸€ç§åŠŸèƒ½ï¼Œèƒ½æ™®é€šç”¨æˆ·&lt;strong&gt;å…è´¹&lt;/strong&gt;åœ¨ä¸Šé¢è¿›è¡Œæ­ç«™ï¼Œäºæ˜¯å°±æ ¹æ®å®˜æ–¹æ–‡æ¡£å’Œå„ç§ç½‘ä¸Šèµ„æ–™è¿›è¡Œè‡ªå·±æ­ç«™å°è¯•ã€‚æ­¤é—´è¿‡ç¨‹æœ‰äº›æ›²æŠ˜ï¼Œæ‰€ä»¥ä¹ŸæŠŠè¿‡ç¨‹è®°å½•ä¸‹æ¥ï¼Œæä¾›ç»™å…¶ä»–çš„æœ‹å‹è¿›è¡Œå‚è€ƒã€‚&lt;/p&gt;

&lt;h1 id=&quot;åŸºç¡€çŸ¥è¯†&quot;&gt;åŸºç¡€çŸ¥è¯†&lt;/h1&gt;

&lt;p&gt;è¦ä½¿ç”¨jekyll+github pagesæ­ç«™ï¼Œéœ€è¦å­¦äº›ä¸€ä¸ªåŸºç¡€çš„çŸ¥è¯†ï¼Œè¿™æ ·æ‰èƒ½åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­å¾—å¿ƒåº”æ‰‹ã€‚å…³äºjekyllçš„ç”¨æ³•ï¼Œå¦‚æœæœ‰ä¸ç†Ÿæ‚‰çš„ï¼Œå¯ä»¥å‚è€ƒåšä¸»çš„å¦ä¸€ç¯‡æ–‡ç« &lt;a href=&quot;http://localhost:4000/jekyll/jekyllåŸºæœ¬æ¦‚å¿µä»‹ç»å’Œå®‰è£…&quot;&gt;jekyllåŸºæœ¬æ¦‚å¿µä»‹ç»å’Œå®‰è£…&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;å¦‚æœçœ‹åˆ°è¿™é‡Œçš„ï¼Œåšä¸»å°±å‡è®¾å·²ç»çŸ¥é“jekyllæ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Œä»¥åŠä¼šmarkdownç­‰è¯­è¨€äº†ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥å°±ç»™å¤§å®¶ä»‹ç»æ€ä¹ˆåˆ©ç”¨github pagesæ¥æ­å»ºè‡ªå·±çš„åšå®¢ç«™ã€‚&lt;/p&gt;

&lt;h1 id=&quot;æ­å»ºæ­¥éª¤&quot;&gt;æ­å»ºæ­¥éª¤&lt;/h1&gt;

&lt;h2 id=&quot;ç¬¬ä¸€æ­¥ç‰©è‰²è‡ªå·±å–œæ¬¢çš„æ¨¡æ¿&quot;&gt;ç¬¬ä¸€æ­¥ï¼šç‰©è‰²è‡ªå·±å–œæ¬¢çš„æ¨¡æ¿&lt;/h2&gt;
&lt;p&gt;github pagesæœ¬èº«æä¾›äº†ä¸€äº›ç®€å•çš„æ¨¡æ¿å¯ä»¥åœ¨settingä¸­è¿›è¡Œé…ç½®ï¼Œä¸è¿‡å¯é€‰æ‹©çš„å¤ªå°‘ï¼Œæ‰€ä»¥å¦‚æœæ²¡æœ‰å–œæ¬¢çš„å¯ä»¥å»å…¶å®ƒåœ°æ–¹å¤šæŒ‘å‡ ä¸ªæ‰¾åˆ°è‡ªå·±å–œæ¬¢çš„æ¨¡æ¿ã€‚
åšä¸»åœ¨è¿›è¡Œæœç´¢è¿‡ç¨‹ä¸­ï¼Œæ— æ„æ‰¾åˆ°äº†ä¸€ä½å¤§ç¥çš„blog&lt;a href=&quot;http://cenalulu.github.io/jekyll/choose-a-template-for-your-blog/&quot;&gt;Jekyll&amp;amp;Github Pagesåšå®¢æ¨¡æ¿æŒ‘é€‰å’Œé…ç½®&lt;/a&gt;ï¼Œç„¶åé‡Œé¢ä»‹ç»äº†å‡ ä¸ªæ‰¾æ¨¡æ¿çš„åœ°æ–¹ï¼Œè¿™é‡Œæ¥åªæ¥åšä¸€ä¸ªæ¬è¿å·¥ï¼Œå°†è¿™å‡ ä¸ªåœ°å€copyè¿‡æ¥äº†&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://jekyllthemes.org/&quot;&gt;jekyllthemes.org&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://jekythemes.net&quot;&gt;jekythemes.net&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://mademistakes.com/work/jekyll-themes/&quot;&gt;mademistakes&lt;/a&gt; (æœ€ååšä¸»æˆ‘ä¹Ÿæ˜¯åœ¨è¿™ä¸ªå¤§ç¥çš„å‡ ä¸ªæ¨¡æ¿ä¸­æŒ‘ä¸­äº†ç°åœ¨è¿™ä¸ªæ¨¡æ¿)&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;ç¬¬äºŒæ­¥githubåˆ›å»ºblogé¡¹ç›®&quot;&gt;ç¬¬äºŒæ­¥ï¼šgithubåˆ›å»ºblogé¡¹ç›®&lt;/h2&gt;
&lt;p&gt;æŒ‰ç…§å®˜æ–¹æ–‡æ¡£&lt;a href=&quot;https://pages.github.com/&quot;&gt;github pages&lt;/a&gt;æ–°å»ºä¸€ä¸ªgithub pagesé¡¹ç›®ï¼Œå¹¶ä»¥username.github.ioæ ¼å¼å‘½åæ–°åˆ†æ”¯ã€‚&lt;/p&gt;

&lt;h2 id=&quot;ç¬¬ä¸‰æ­¥å¯¼å…¥æ¨¡æ¿&quot;&gt;ç¬¬ä¸‰æ­¥ï¼šå¯¼å…¥æ¨¡æ¿&lt;/h2&gt;
&lt;p&gt;å¯¼å…¥æ¨¡æ¿æœ‰ä¸¤ç§æ–¹å¼ï¼šä¸€ç§æ˜¯æœ¬åœ°è‡ªå·±ç›´æ¥cloneæ¨¡æ¿é¡¹ç›®çš„githubæ–‡ä»¶ï¼Œç„¶åæ”¾åˆ°è‡ªå·±é¡¹ç›®ä¸­è¿›è¡Œç¼–è¯‘ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯é€šè¿‡è¿œç¨‹çš„æ–¹å¼ï¼Œè‡ªå·±çš„é¡¹ç›®ä¸­æ²¡æœ‰æ¨¡æ¿é¡¹ç›®çš„ä»»ä½•æ–‡ä»¶ã€‚è¿™ä¸¤ç§çš„åŒºåˆ«æ˜¯ï¼Œè¿œç¨‹çš„æ¯æ¬¡buildçš„æ—¶å€™éœ€è¦é€šè¿‡å»è¿œç«¯æ‹‰å–ç›¸å…³èµ„æºï¼Œå¦‚æœæœ¬åœ°è°ƒè¯•çš„æ—¶å€™ï¼Œç½‘è·¯ä¸å¥½å¯èƒ½ä¼šå¯¼è‡´é¡¹ç›®å¯åŠ¨å¾ˆæ…¢ã€‚ä½†åšä¸»ä½œä¸ºä¸€ä¸ªæ´ç™–ï¼Œä¸ºäº†ä½¿è‡ªå·±çš„é¡¹ç›®çœ‹èµ·æ¥å¹²å‡€ï¼Œæ‰€ä»¥é€‰æ‹©äº†ç¬¬äºŒç§æ–¹å¼ã€‚
å¦‚æœä½¿ç”¨ç¬¬äºŒç§è¿œç«¯çš„æ–¹å¼ï¼Œé‚£ä¹ˆåªéœ€è¦åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª_config.ymlçš„æ–‡ä»¶ï¼Œå¹¶å°†ä¸»é¢˜é…ç½®å†™è¿›æ–‡ä»¶å°±å¯ä»¥äº†ï¼Œè¿˜æ˜¯ä»¥åšä¸»è‡ªå·±ä¸ºä¾‹ï¼š
&lt;img src=&quot;http://localhost:4000/assets/pic/jekyll/configæ–‡ä»¶ç¤ºæ„å›¾.png&quot; alt=&quot;_configæ–‡ä»¶ç¤ºæ„å›¾&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç„¶ååœ¨_config.ymlæ–‡ä»¶ä¸­å†™å…¥remote-themeé…ç½®ä¿¡æ¯&lt;/p&gt;
&lt;div class=&quot;language-yml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;remote_theme           &lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;mmistakes/minimal-mistakes&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;ç¬¬å››æ­¥å¯¼å…¥åšå®¢&quot;&gt;ç¬¬å››æ­¥ï¼šå¯¼å…¥åšå®¢&lt;/h2&gt;
&lt;p&gt;å¦‚æœå·²ç»æœ‰åšå®¢äº†ï¼Œé‚£ä¹ˆå°±å°†åšå®¢ç›´æ¥å¯¼å…¥åˆ°_postsç›®å½•ä¸‹ï¼Œå¹¶æŒ‰ç…§æ¨¡æ¿ä»¥åŠjekyllçš„é…ç½®è§„åˆ™ï¼Œè¿›è¡Œé…ç½®å°±å¥½äº†ã€‚&lt;/p&gt;

&lt;h2 id=&quot;ç¬¬äº”æ­¥æœ¬åœ°è°ƒè¯•å¹¶æ¨é€åˆ°githubä¸­&quot;&gt;ç¬¬äº”æ­¥ï¼šæœ¬åœ°è°ƒè¯•å¹¶æ¨é€åˆ°githubä¸­&lt;/h2&gt;
&lt;p&gt;åˆ°äº†è¿™ä¸€æ­¥ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œä½ ç¦»æˆåŠŸå°±åªå·®ä¸€æ­¥ä¹‹é¥äº†ã€‚åœ¨æœ¬åœ°è°ƒè¯•ï¼Œå¸ƒå±€ç­‰éƒ½ç¬¦åˆé¢„æœŸåï¼Œå°±å¯ä»¥ç›´æ¥å°†é¡¹ç›®pushåˆ°githubä¸­äº†ï¼Œç„¶åç­‰å¾…github pageå¸®ä½ æ„å»ºé¡¹ç›®ï¼Œå¹¶å¯åŠ¨å°±å¥½äº†ã€‚&lt;/p&gt;

&lt;h2 id=&quot;ç¬¬å…­æ­¥æ¬£èµè‡ªå·±çš„åšå®¢ç«™&quot;&gt;ç¬¬å…­æ­¥ï¼šæ¬£èµè‡ªå·±çš„åšå®¢ç«™&lt;/h2&gt;
&lt;p&gt;åœ¨githubçš„é¡¹ç›®settingé¡µé¢ï¼Œåœ¨github pagesé…ç½®ä¸­ï¼Œå°±å¯ä»¥çœ‹åˆ°è‡ªå·±çš„åšå®¢ç«™åŸŸåï¼Œç‚¹å‡»åå°±å¯ä»¥çœ‹åˆ°å±äºè‡ªå·±çš„åšå®¢äº†ğŸ‘
&lt;img src=&quot;http://localhost:4000/assets/pic/jekyll/æŸ¥çœ‹åšå®¢ç«™åŸŸå.png&quot; alt=&quot;æŸ¥çœ‹è‡ªå·±åŸŸå&quot; /&gt;&lt;/p&gt;</content><author><name>Conan</name></author><summary type="html">èƒŒæ™¯</summary></entry><entry><title type="html">JekyllåŸºæœ¬æ¦‚å¿µä»‹ç»å’Œå®‰è£…</title><link href="http://localhost:4000/jekyll/jekyll%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E4%BB%8B%E7%BB%8D%E5%92%8C%E5%AE%89%E8%A3%85/" rel="alternate" type="text/html" title="JekyllåŸºæœ¬æ¦‚å¿µä»‹ç»å’Œå®‰è£…" /><published>2018-10-07T00:00:00+08:00</published><updated>2018-10-07T00:00:00+08:00</updated><id>http://localhost:4000/jekyll/jekyll%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E4%BB%8B%E7%BB%8D%E5%92%8C%E5%AE%89%E8%A3%85</id><content type="html" xml:base="http://localhost:4000/jekyll/jekyll%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E4%BB%8B%E7%BB%8D%E5%92%8C%E5%AE%89%E8%A3%85/">&lt;blockquote&gt;
  &lt;p&gt;æœ¬æ–‡æ—¨åœ¨ç®€å•ä»‹ç»åšå®¢ç«™æ­å»ºå·¥å…·jekyllçš„åŸºæœ¬æ¦‚å¿µå’Œç”¨æ³•&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;jekyllæ˜¯ä»€ä¹ˆ&quot;&gt;jekyllæ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h1&gt;

&lt;p&gt;å¯¹äºåˆšåˆšæ¥è§¦jekyllè¿™ä¸ªåšå®¢æ­å»ºç¥å™¨çš„å°ç™½â€”â€”æ¯”å¦‚æˆ‘ï¼Œæ¥è¯´ï¼Œå¯¹äºjekyllè¿™ä¸ªä¸œè¥¿åº”è¯¥ä¼šæ„Ÿåˆ°æå…¶é™Œç”Ÿå§ã€‚æ‰€ä»¥è¿™é‡Œç®€è¦ä»‹ç»ä¸€ä¸‹jekyllæ˜¯ä»€ä¹ˆï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Transform your plain text into static websites and blogs.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;è¿™ä¸ªæ˜¯&lt;a href=&quot;https://jekyllrb.com/&quot;&gt;jekyllå®˜ç½‘&lt;/a&gt;é¦–é¡µçš„ä¸€å¥è¯ã€‚åšä¸»å­¦ä¹ åæŒ‰ç…§ç†è§£ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼šjekyllæ˜¯ä¸€ä¸ªåŸºäºrubyå°†çº¯æ–‡æœ¬è½¬æ¢æˆé™æ€ç½‘ç«™å’Œåšå®¢çš„ä¸€ä¸ªå·¥å…·ï¼Œè¯¥å·¥å…·æ”¯æŒå°†markdownï¼Œliquidï¼ŒHTML&amp;amp;CSSç­‰è½¬æ¢æˆé™æ€ç½‘ç«™ã€‚
æ‰€ä»¥é€šè¿‡ä¸Šè¿°æè¿°ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œè¿™ä¸ªå·¥å…·éœ€è¦ä¸€ä¸ªç¯å¢ƒå’Œæ”¯æŒä¸‰ç§â€œè¯­è¨€â€æ–‡æœ¬æ ¼å¼ï¼Œå³ï¼š&lt;strong&gt;ruby&lt;/strong&gt; ç¯å¢ƒ+&lt;strong&gt;markdown&lt;/strong&gt;ã€&lt;strong&gt;liquid&lt;/strong&gt;ã€&lt;strong&gt;HTML&amp;amp;CSS&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&quot;ruby&quot;&gt;ruby&lt;/h2&gt;
&lt;blockquote&gt;
  &lt;p&gt;rubyæ˜¯ä¸€ç§é¢å‘å¯¹è±¡ã€å‘½ä»¤å¼ã€å‡½æ•°å¼ã€åŠ¨æ€çš„é€šç”¨ç¼–ç¨‹è¯­è¨€&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä»¥ä¸Šä»‹ç»æ‘˜è‡ªç™¾åº¦ç™¾ç§‘ã€‚å› ä¸ºåšä¸»ä¸æ˜¯rubyerï¼Œæ‰€ä»¥å°±ä¸åšè¿‡å¤šä»‹ç»ï¼Œå¤§å®¶å¯ä»¥é€šè¿‡ruby -væ¥æ£€æŸ¥è‡ªå·±ç”µè„‘æ˜¯å¦å®‰è£…æœ‰rubyï¼Œå¦‚æœæ²¡æœ‰æˆ–è€…ç‰ˆæœ¬è¿‡ä½ï¼Œå¯ä»¥æŒ‰ç…§å®˜ç½‘çš„ä»‹ç»è¿›è¡Œå®‰è£…
&lt;a href=&quot;https://gems.ruby-china.com/&quot;&gt;rubyä¸­å›½å®˜ç½‘&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;markdown&quot;&gt;markdown&lt;/h2&gt;
&lt;p&gt;markdownæ˜¯ä¸€ç§çº¯æ–‡æœ¬çš„æ ¼å¼åŒ–æ ‡è®°è¯­è¨€ï¼Œé€šè¿‡æ‰“æ ‡ç­¾ç­‰æ–¹å¼ï¼Œæ¥ç»™çº¯æ–‡æœ¬æ–‡ç« åŠ ä¸Šæ ¼å¼ï¼Œå¹¶å¯ä»¥æ–¹ä¾¿çš„è½¬æ¢æˆhtmlç­‰ç½‘é¡µæ ¼å¼ï¼Œé»˜è®¤åç¼€åä¸ºmdã€‚æ‰€ä»¥é€šè¿‡è¿™é‡Œï¼Œå°±å‘ç°ï¼ŒmarkdownçœŸçš„æ˜¯ä¸€ä¸ªå¤©ç„¶ç”¨æ¥å†™åšå®¢çš„è¯­è¨€ã€‚å…·ä½“è¯­æ³•å¯ä»¥è‡ªè¡Œè¿›è¡Œæœç´¢ã€‚&lt;/p&gt;

&lt;h2 id=&quot;liquid&quot;&gt;liquid&lt;/h2&gt;
&lt;p&gt;liquidæ˜¯ä¸€ä¸ªé¢å‘htmlçš„æ¨¡æ¿è¯­è¨€ï¼Œå¯ä»¥åœ¨htmlä¸­æ–¹ä¾¿çš„ä½¿ç”¨æ¥è¾¾åˆ°æ ¹æ®ä¸åŒçš„æ•°æ®å‚æ•°ç”Ÿæˆä¸åŒçš„htmlé¡µé¢çš„åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;h2 id=&quot;htmlcss&quot;&gt;html&amp;amp;&amp;amp;css&lt;/h2&gt;
&lt;p&gt;è¿™ä¸ªå°±ä¸å¤šåšä»‹ç»äº†&lt;/p&gt;

&lt;h1 id=&quot;jekyllå®‰è£…&quot;&gt;jekyllå®‰è£…&lt;/h1&gt;
&lt;p&gt;æŒ‰ç…§&lt;a href=&quot;https://jekyllrb.com/&quot;&gt;jekyllå®˜ç½‘&lt;/a&gt;çš„ä»‹ç»ï¼Œå®‰è£…éœ€è¦æ‰§è¡Œä»¥ä¸‹ä¸€ä¸ªå‘½ä»¤ï¼š&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gem install bundler jekyll
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;è¿™ä¸ªå‘½ä»¤å®‰è£…äº†ä¸¤ä¸ªä¸œè¥¿ï¼Œä¸€ä¸ªæ˜¯bundlerâ€”â€”rubyæ˜¯ç”¨çš„ä¾èµ–ç®¡ç†å·¥å…·ï¼Œä¸€ä¸ªå°±æ˜¯æˆ‘ä»¬éœ€è¦çš„jekylläº†ã€‚è¿™ä¸¤ä¸ªéƒ½éœ€è¦è£…å¥½æ‰èƒ½ä½¿ç”¨ã€‚
å¯æ˜¯æœ‰äº›macç‰ˆæœ¬oså› ä¸ºæ¯”è¾ƒæ–°ï¼Œç„¶åappleå®˜æ–¹å¯¹äºæƒé™çš„ç®¡ç†å˜å¾—å¾ˆä¸¥ï¼Œæ‰€ä»¥åœ¨å®‰è£…çš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹ä¸¤ç§æŠ¥é”™ï¼š&lt;/p&gt;
&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;ERROR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;no&quot;&gt;While&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;executing&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Gem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FilePermissionError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;You&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;don&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;have&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;write&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;permissions&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/Library/&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Ruby&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Gems&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;2.3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;directory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;è¿™ç§é”™å°±æ˜¯å¾ˆå¸¸è§çš„æƒé™é—®é¢˜ï¼Œæ‰€ä»¥åªéœ€è¦sudoä¸€ä¸‹å°±å¯ä»¥äº†ã€‚
é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯èƒ½ä¼šæœ‰è¿™æ ·çš„æŠ¥é”™:&lt;/p&gt;
&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;ERROR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;no&quot;&gt;While&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;executing&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Gem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FilePermissionError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;You&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;don&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;have&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;write&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;permissions&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/usr/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bin&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;directory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;è¿™ä¸ªæŠ¥é”™æ˜¯è¯´å°½ç®¡sudoäº†ï¼Œä½†æ˜¯ä¾æ—§è¿˜æ˜¯ä¸èƒ½åœ¨/usr/binç›®å½•ä¸‹å–çš„å®‰è£…æ‰€éœ€è¦çš„æƒé™ï¼Œæ­¤æ—¶çš„è§£å†³æ–¹æ³•å°±æ˜¯æ¢ä¸€ä¸ªç›®å½•ï¼Œå³å‘½ä»¤å¦‚ä¸‹&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;gem install &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; /usr/local/bin bundler jekyll
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;è¿™æ ·å°±å¯ä»¥é¡ºåˆ©çš„å®‰è£…å¥½jekylläº†&lt;/p&gt;

&lt;h1 id=&quot;jekyllä½¿ç”¨&quot;&gt;jekyllä½¿ç”¨&lt;/h1&gt;
&lt;p&gt;åªéœ€è¦åˆ›å»ºè‡ªå·±çš„åšå®¢ç›®å½•ï¼Œå¹¶æ‰§è¡Œå¯åŠ¨å‘½ä»¤å°±å¯ä»¥äº†ï¼š&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mkdir conan &amp;amp; &lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;conan
bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;jekyll serve
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;ç„¶åä½ ä¼šçœ‹åˆ°ç±»ä¼¼çš„æ—¥å¿—ï¼Œæ­¤æ—¶å†æµè§ˆå™¨ä¸­è®¿é—®http://127.0.0.1:4000 å°±å¯ä»¥äº†&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Configuration file: /Users/apple/Workspace/jackckr.github.io/_config.yml
            Source: /Users/apple/Workspace/jackckr.github.io
       Destination: /Users/apple/Workspace/jackckr.github.io/_site
 Incremental build: disabled. Enable with &lt;span class=&quot;nt&quot;&gt;--incremental&lt;/span&gt;
      Generating...
      Remote Theme: Using theme mmistakes/minimal-mistakes
   GitHub Metadata: No GitHub API authentication could be found. Some fields may be missing or have incorrect data.
                    &lt;span class=&quot;k&quot;&gt;done in &lt;/span&gt;22.817 seconds.
 Auto-regeneration: enabled &lt;span class=&quot;k&quot;&gt;for 
    &lt;/span&gt;Server address: http://127.0.0.1:4000
  Server running... press ctrl-c to stop.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;åœ¨jekyllå¯åŠ¨çš„æ—¶å€™ï¼Œå°±ä¼šæ‰«æå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œç„¶åæ ¹æ®çº¦å®šçš„è¯­æ³•è§„åˆ™ç”Ÿæˆåšå®¢ç«™ã€‚å› ä¸ºæˆ‘ä»¬é€šå¸¸ä½¿ç”¨çš„æ—¶å€™ï¼Œéƒ½æ˜¯ç›´æ¥ä¸‹è½½ç¬¬ä¸‰æ–¹å†™å¥½çš„æ¨¡æ¿ï¼Œç„¶åæ”¾å…¥è‡ªå·±çš„åšå®¢å°±å¯ä»¥äº†ï¼Œæ‰€ä»¥è¿™é‡Œä¸è¯¦ç»†ä»‹ç»è¿™äº›è§„åˆ™ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥ç›´æ¥å»&lt;a href=&quot;https://jekyllrb.com/&quot;&gt;jekyllå®˜ç½‘&lt;/a&gt;å­¦ä¹ ã€‚&lt;/p&gt;
&lt;h1 id=&quot;jekyllåŸºæœ¬æ¦‚å¿µä»‹ç»&quot;&gt;jekyllåŸºæœ¬æ¦‚å¿µä»‹ç»&lt;/h1&gt;

&lt;h2 id=&quot;front-matter&quot;&gt;Front matter&lt;/h2&gt;
&lt;p&gt;ä¸€å¼€å§‹æ¥è§¦è¿™ä¸ªè¯æ±‡çš„æ—¶å€™ï¼Œåšä¸»æˆ‘è¡¨ç¤ºçœŸæ˜¯ä¸€è„¸æ‡µé€¼ğŸ˜²ã€‚ç„¶åä¹Ÿæ˜¯æµ‹è¯•ï¼Œçœ‹åˆ«äººçš„å†™æ³•ï¼Œç„¶åæ‰ç†è§£è¿™ä¸ªçš„å«ä¹‰ã€‚ä¸‹é¢ä¸¾ä¾‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;language-markdown highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nn&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;layout&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;posts&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;author&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;conan&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;author_profile&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;nn&quot;&gt;---&lt;/span&gt;
markdownæ­£æ–‡
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;å¦‚ä¸Šé¢æ‰€ç¤ºï¼Œfront matteré¡¾åæ€ä¹‰ï¼Œå°±æ˜¯åœ¨æ¯ä¸ªmarkdownæ–‡ä»¶çš„å¼€å¤´åŠ ä¸Šä¸€äº›â€œæ ‡ç­¾â€ï¼ˆä»¥â€œâ€”â€ç¬¦å·å¼€å¤´å’Œç»“å°¾ï¼‰ï¼Œæ¥è¡¨ç¤ºè¿™ä¸ªæ–‡æ¡£çš„å±æ€§ï¼Œå¦‚ä¸Šé¢æ‰€è¯´jekyllä¼šæ‰«ææ‰€æœ‰æ–‡ä»¶ï¼Œç„¶åè¿™äº›æ ‡ç­¾å°±ä¼šè¢«jekyllæ‰€è¯†åˆ«ï¼Œç„¶åå°±ä¼šå½±å“æ–‡ç« htmlçš„ç”Ÿæˆæ ¼å¼ã€‚æ¯”å¦‚ä¸Šé¢çš„layout: postså°±è¡¨ç¤ºè¿™ç¯‡ç”¨postsè¿™ä¸ªâ€œæ ¼å¼â€æ¥å±•ç¤ºæ–‡ç« ï¼Œå¹¶ä¸”æ˜¾ç¤ºçš„ä½œè€…æ˜¯conanã€‚
front matteré‡Œé¢çš„æ ‡ç­¾ï¼Œæœ‰äº›äº‹jekyllçš„ä¿ç•™ä½¿ç”¨çš„key(å¦‚layout)ï¼Œæœ‰äº›åˆ™æ˜¯ç”±å…·ä½“çš„æ¨¡æ¿æ¥å®šä¹‰ä½¿ç”¨çš„(å¦‚author_profile)ï¼Œæ‰€ä»¥è¿™äº›éœ€è¦æŸ¥é˜…å…·ä½“çš„æ¨¡æ¿æ–‡æ¡£ã€‚&lt;/p&gt;

&lt;h2 id=&quot;layouts&quot;&gt;layouts&lt;/h2&gt;
&lt;p&gt;jekyllå¸ƒå±€æ¨¡æ¿ã€‚åœ¨æ ¹ç›®å½•ä¸‹æœ‰ä¸€ä¸ª_layoutsç›®å½•ï¼Œç„¶åé‡Œé¢å­˜æ”¾çš„htmlæ–‡ä»¶å°±æ˜¯å¸ƒå±€æ–‡ä»¶ï¼Œæ–‡ä»¶åå°±æ˜¯layoutsçš„å€¼ï¼Œæ¯”å¦‚å¦‚æœæœ‰&lt;strong&gt;posts.html&lt;/strong&gt;ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨front matterä¸­æŒ‡å®šlayoutä¸º&lt;strong&gt;posts&lt;/strong&gt;ï¼Œé‚£ä¹ˆåšå®¢å°±ä¼šä»¥posts.htmlä¸­å®šä¹‰çš„æ ¼å¼è¿›è¡Œå±•ç¤ºã€‚è¿™ä¸ªå¯ä»¥è‡ªå·±å†™ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„æ¨¡æ¿ã€‚&lt;/p&gt;

&lt;h2 id=&quot;posts&quot;&gt;posts&lt;/h2&gt;
&lt;p&gt;åœ¨æ ¹ç›®å½•ä¸‹æœ‰ä¸€ä¸ª_postsç›®å½•ï¼Œé¡¾åä½†æˆ‘æ€ä¸äº†ä¹‰â”‘(ï¿£Ğ” ï¿£)â”ï¼Œè¿™ä¸ªç›®å½•å°±æ˜¯å­˜æ”¾æˆ‘ä»¬markdownæ ¼å¼åšå®¢çš„åœ°æ–¹ã€‚åœ¨è¿™é‡Œï¼Œå¯ä»¥æœ‰ä»»æ„æ•°é‡å’Œæ·±åº¦çš„æ–‡ä»¶å¤¹æ¥ç»„ç»‡æˆ‘ä»¬çš„markdownæ–‡ä»¶ï¼Œä½†æ˜¯markdownæ–‡ä»¶åå´å¿…é¡»æœ‰è§„å®šçš„æ ¼å¼ï¼š&lt;strong&gt;YYYY-MM-DD-title&lt;/strong&gt;,è¿™é‡Œå¿…é¡»æ˜¯4ä½æ•°çš„å¹´-2ä½æ•°çš„æœˆ-2ä½æ•°çš„æ—¥-æ–‡ç« åï¼Œå…¶ä¸­æ–‡ç« åå¯ä»¥æœ‰ä»»æ„å­—ç¬¦åŒ…æ‹¬â€œ-â€ã€‚åªæœ‰è¿™ç§æ ¼å¼çš„æ–‡ç« æ‰ä¼šè¢«jekyllè¯†åˆ«ï¼Œå¦åˆ™æ˜¯ä¸ä¼šè¢«ç”¨æ¥ç”Ÿæˆhtmlçš„ã€‚ã€‚ã€‚ã€‚&lt;/p&gt;

&lt;h2 id=&quot;pages&quot;&gt;pages&lt;/h2&gt;
&lt;p&gt;åœ¨æ ¹ç›®å½•ä¸‹é€šå¸¸è¿˜æœ‰ä¸€ä¸ª_pagesçš„ç›®å½•ï¼Œè¿™ä¸ªç›®å½•ä¸‹å­˜æ”¾çš„å°±æ˜¯ä¸€äº›ä¸åšå®¢æ— å…³ï¼Œæ¯”å¦‚homeï¼Œaboutï¼Œ404ç­‰å•é¡µé¢(å¯ä»¥æ˜¯mdæˆ–htmlæ ¼å¼)ï¼Œè¿™äº›é¡µé¢çš„æ–‡ä»¶åä¼šç›´æ¥è¢«ç”¨åœ¨urlï¼Œæˆ–è€…é€šè¿‡permalinkè¿™æ ·ä¸€ä¸ªfront matterå»æŒ‡å®šã€‚&lt;/p&gt;

&lt;h2 id=&quot;data-files&quot;&gt;data files&lt;/h2&gt;
&lt;p&gt;åœ¨æ ¹ç›®å½•ä¸‹æœ‰ä¸€ä¸ª_dataçš„ç›®å½•ï¼Œè¿™é‡Œä¸»è¦æ˜¯å­˜æ”¾ä¸€äº›è·Ÿå¯¼èˆªæ ç›¸å…³çš„é…ç½®ä¿¡æ¯ï¼Œæ‰€ä»¥é€šå¸¸ä¼šæœ‰ä¸€ä¸ªnavigation.htmlæ–‡ä»¶ï¼Œç„¶åä½ å¯ä»¥æ ¹æ®æ¨¡æ¿çš„è¦æ±‚ï¼Œå»é…ç½®ä¸€äº›å¯¼èˆªæ ã€‚&lt;/p&gt;

&lt;h2 id=&quot;collections&quot;&gt;collections&lt;/h2&gt;
&lt;p&gt;è¿™ä¸ªä¸»è¦æ˜¯å°†å¤šä¸ªåŒä¸€ç±»å‹çš„åšå®¢è¿›è¡Œç»Ÿä¸€ç®¡ç†çš„åŠŸèƒ½ï¼Œæ™®é€šç”¨æ³•åŸºæœ¬ç”¨ä¸ä¸Šï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥å»å®˜ç½‘è‡ªå·±å­¦ä¹ ä½¿ç”¨ã€‚&lt;/p&gt;</content><author><name>Conan</name></author><summary type="html">æœ¬æ–‡æ—¨åœ¨ç®€å•ä»‹ç»åšå®¢ç«™æ­å»ºå·¥å…·jekyllçš„åŸºæœ¬æ¦‚å¿µå’Œç”¨æ³•</summary></entry><entry><title type="html">Golang mapå®ç°</title><link href="http://localhost:4000/golang/golang-map%E5%AE%9E%E7%8E%B0/" rel="alternate" type="text/html" title="Golang mapå®ç°" /><published>2018-10-06T00:00:00+08:00</published><updated>2018-10-06T00:00:00+08:00</updated><id>http://localhost:4000/golang/golang-map%E5%AE%9E%E7%8E%B0</id><content type="html" xml:base="http://localhost:4000/golang/golang-map%E5%AE%9E%E7%8E%B0/">&lt;h1 id=&quot;golang-mapå®ç°&quot;&gt;Golang mapå®ç°&lt;/h1&gt;

&lt;h2 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h2&gt;

&lt;p&gt;golangåœ¨è‡ªå·±çš„å†…ç½®ç±»å‹ä¸­å®ç°äº†hashmapè¿™ç§æ•°æ®ç»“æ„ï¼Œè€Œä¸”è¿™ä¸ªhashmapçš„keyæ”¯æŒä»»æ„èƒ½è®¡ç®—hashå€¼çš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥è¯´æ˜¯ååˆ†æ–¹ä¾¿äº†ã€‚å› æ­¤æˆ‘åœ¨å„ç§é¡¹ç›®ä¸­éƒ½å¤§é‡ä½¿ç”¨äº†è¿™ç§æ•°æ®ç»“æ„ï¼Œä½†æ˜¯è¶Šæ˜¯è¿™ç§é€šç”¨å‹çš„æ•°æ®ç»“æ„ï¼Œæƒ³è¦åœ¨æŸä¸ªç‰¹å®šçš„åœºæ™¯ä¸­ç”¨å¥½ï¼Œå´ä¸æ˜¯ä¸€ä»¶é‚£ä¹ˆç®€å•çš„äº‹æƒ…ï¼Œæ‰€ä»¥ä¸ºäº†ä¸ç»™é¡¹ç›®åŸ‹å‘ï¼Œæ·±å…¥äº†è§£hashmapçš„å®ç°å°±æ˜¯ä¸€ä»¶ååˆ†æœ‰å¿…è¦çš„äº‹æƒ…äº†ã€‚&lt;/p&gt;

&lt;h2 id=&quot;mapåŸºæœ¬åŸç†&quot;&gt;mapåŸºæœ¬åŸç†&lt;/h2&gt;

&lt;p&gt;hashmapæ˜¯ä¸€ä¸ªååˆ†å¸¸è§ä¹Ÿæ˜¯ååˆ†ç»å…¸çš„æ•°æ®ç»“æ„ï¼Œè€Œé€šå¸¸ä¸€ä¸ªhashmapéœ€è¦å°†keyè¿›è¡Œhashè®¡ç®—ï¼Œç„¶åæ˜ å°„åˆ°ä¸€ä¸ªæ•°ç»„ä¸‹æ ‡ä¸Šï¼Œç„¶åé€šè¿‡æ•°ç»„ä¸‹æ ‡è®¿é—®ï¼Œè¾¾åˆ°O(1)æ—¶é—´å¤æ‚åº¦å¿«é€Ÿè®¿é—®ï¼Œä½†æ˜¯æ— è®ºå¤šç¾å®Œç¾çš„hashç®—æ³•ï¼Œéƒ½ä¼šå¯¼è‡´å¤šä¸ªkeyçš„æœ€åè®¡ç®—ç»“æœç›¸åŒâ€”â€”å³hashç¢°æ’ã€‚è€Œè§£å†³hashç¢°æ’ä¹Ÿæœ‰å¤šç§æ–¹æ³•ï¼Œæ¯”å¦‚é€€é¿æ³•ï¼Œæ‹‰é“¾æ³•ç­‰ç­‰ã€‚å…¶ä¸­ï¼Œæ‹‰é“¾æ³•æ˜¯æœ€ä¸ºå¸¸è§ä¹Ÿæ˜¯æœ€ä¸ºæœ‰æ•ˆçš„æ–¹æ³•ï¼Œå› æ­¤golangçš„hashmapä¹Ÿæ˜¯é‡‡ç”¨çš„æ‹‰é“¾æ³•ï¼Œä½†æ˜¯golangåœ¨æ™®é€šçš„æ‹‰é“¾æ³•ä¸Šåˆåšäº†è®¸å¤šæ€§èƒ½ä¸Šçš„ä¼˜åŒ–ã€‚&lt;/p&gt;

&lt;h2 id=&quot;golang-hashmapåŸºæœ¬æ¦‚å¿µåŸç†&quot;&gt;golang hashmapåŸºæœ¬æ¦‚å¿µåŸç†&lt;/h2&gt;

&lt;p&gt;golangçš„hashmapæ˜¯ç”±ä¸€ä¸ªä¸ªçš„æ¡¶(bucket)ç»„æˆï¼Œæ¯ä¸ªæ¡¶é¢å®šå¯ä»¥æ”¾8ä¸ªå…ƒç´ ï¼Œé€šè¿‡hashç®—æ³•å®šä½æ¡¶çš„ä¸‹æ ‡ï¼Œç„¶ååœ¨æ¯ä¸ªæ¡¶ä¸­å†è¿›è¡ŒæŸ¥æ‰¾ï¼Œå¦‚æœæŸä¸ªhashå€¼çš„å…ƒç´ ä¸ªæ•°è¶…è¿‡8ï¼Œé‚£ä¹ˆåˆ™åœ¨æ¡¶åé¢æ‹‰é“¾å¤„ä¸€ä¸ªæ–°æ¡¶ï¼ˆoverflow bucketsï¼‰ï¼Œç”¨æ¥è£…æ–°æ•°æ®ã€‚ç„¶åé™¤æ­¤å¤–ï¼Œè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªloadFactorçš„æ¦‚å¿µï¼Œå³æ¡¶å¹³å‡çš„è£…è½½ç‡ã€‚æ¡¶çš„è£…è½½ç‡ç›´æ¥å½±å“äº†overflow bucketsçš„æ•°ç›®å’Œå†…å­˜ä½¿ç”¨ç‡ï¼Œé€šè¿‡ä½œè€…æµ‹è¯•ï¼Œå½“loadFactoråœ¨6.5çš„æ—¶å€™èƒ½è¾¾åˆ°æœ€å¥½çš„å¹³è¡¡ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/assets/pic/golang/go-mapä»‹ç».png&quot; alt=&quot;go-mapä»‹ç»&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;æ•°æ®ç»“æ„&quot;&gt;æ•°æ®ç»“æ„&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;http://localhost:4000/assets/pic/golang/go-hmapæ•°æ®ç»“æ„.png&quot; alt=&quot;go-mapæ•°æ®ç»“æ„&quot; /&gt;
åœ¨ä¸Šè¿°æ•°æ®ç»“æ„ä¸­ï¼Œæœ€ä¸ºé‡è¦çš„å°±æ˜¯bmapè¿™ä¸ªæ•°æ®ç»“æ„äº†ï¼Œä¹Ÿå°±æ˜¯ä¸Šæ–‡ä»‹ç»çš„ä¸€ä¸ªbucketã€‚bmapåŒ…å«äº†ä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€ä¸ªéƒ¨åˆ†æ˜¯tophashè¿™æ ·ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œè¿™ä¸ªä¸»è¦ä½œä¸ºåœ¨bucketä¸­è¿›è¡Œå¿«é€Ÿå®šä½çš„ä¸€ç§â€œfilterâ€ï¼Œç„¶åå†åé¢å°±æ˜¯8ä¸ªkeyå’Œ8ä¸ªvalueçš„æ•°æ®ç©ºé—´ï¼Œè¿™éƒ¨åˆ†æ•°æ®çš„è®¿é—®å…¨éƒ¨é€šè¿‡åœ°å€pointor+ä¸‹æ ‡åç§»æ¥å®Œæˆã€‚ç„¶åæœ€åä¸€ä¸ªå°±æ˜¯ä¸€ä¸ªpointorï¼Œç”¨æ¥æŒ‡å‘overflowçš„bucketæ•°æ®ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¯¦ç»†ä»‹ç»&quot;&gt;è¯¦ç»†ä»‹ç»&lt;/h2&gt;
&lt;p&gt;ä¸Šé¢ç®€å•ä»‹ç»äº†golang hashmapçš„åŸºæœ¬åŸç†ï¼Œé‚£ä¹ˆä¸‹é¢å°±é€šè¿‡å¢åˆ æ”¹æŸ¥æ“ä½œæ¥è¯¦ç»†ä»‹ç»ä¸€ä¸‹å®ƒçš„ä¸€äº›å®ç°ç»†èŠ‚ï¼Œå¹¶é€šè¿‡è¿™ä¸ªæ¥æŒ‡å¯¼æˆ‘ä»¬å¹³æ—¶è‡ªå·±çš„ä½¿ç”¨&lt;/p&gt;
&lt;h3 id=&quot;mapåˆå§‹åŒ–&quot;&gt;mapåˆå§‹åŒ–&lt;/h3&gt;
&lt;p&gt;mapçš„åˆå§‹åŒ–é€šè¿‡makemapæ–¹æ³•å®ç°ï¼Œè¯¥æ–¹æ³•ä¼šåšä¸€äº›åˆæ³•æ€§åˆ¤æ–­ï¼Œç„¶åå¦‚æœä¼ å…¥äº†åˆå§‹åŒ–å¤§å°ï¼Œåˆ™ä¼šæ ¹æ®å¤§å°å’ŒloadFactoræ¥åˆ›å»ºå¯¹åº”æ•°é‡çš„bucket&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;func overLoadFactor(count int64, B uint8) bool {
	// TODO: rewrite to use integer math and comparison?
	return count &amp;gt;= bucketCnt &amp;amp;&amp;amp; float32(count) &amp;gt;= loadFactor*float32((uintptr(1)&amp;lt;&amp;lt;B))
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;å¦‚æœæ²¡æœ‰ä¼ å¤§å°ï¼Œé‚£ä¹ˆåªä¼šåˆå§‹åŒ–mapçš„æ•°æ®ç»“æ„ï¼Œè€Œä¸ä¼šåˆ›å»ºä»»ä½•çš„bucketâ€”â€”lazy initã€‚&lt;/p&gt;</content><author><name>Conan</name></author><summary type="html">Golang mapå®ç°</summary></entry><entry><title type="html">Go Redisè¿æ¥æ± å®ç°</title><link href="http://localhost:4000/golang/go-redis%E8%BF%9E%E6%8E%A5%E6%B1%A0%E5%AE%9E%E7%8E%B0/" rel="alternate" type="text/html" title="Go Redisè¿æ¥æ± å®ç°" /><published>2018-10-06T00:00:00+08:00</published><updated>2018-10-06T00:00:00+08:00</updated><id>http://localhost:4000/golang/go-redis%E8%BF%9E%E6%8E%A5%E6%B1%A0%E5%AE%9E%E7%8E%B0</id><content type="html" xml:base="http://localhost:4000/golang/go-redis%E8%BF%9E%E6%8E%A5%E6%B1%A0%E5%AE%9E%E7%8E%B0/">&lt;h1 id=&quot;go-redisè¿æ¥æ± å®ç°&quot;&gt;go-redisè¿æ¥æ± å®ç°&lt;/h1&gt;
&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;èƒŒæ™¯&lt;/h1&gt;
&lt;p&gt;å› ä¸ºinspectoréœ€è¦æ­£å¼æ¥å…¥redisçš„ç§’çº§ç›‘æ§ï¼Œåœ¨ç§’çº§ç›‘æ§åœºæ™¯ä¸‹ï¼Œå¦‚æœredis driverçš„ä½¿ç”¨æœ‰ä»»ä½•ä¸å½“ï¼Œéƒ½æœ‰å¯èƒ½å¯¼è‡´çº¿ä¸Šæ•…éšœï¼Œæ‰€ä»¥ç‰¹åœ°äº†è§£äº†ä¸€ä¸‹go-redis driverçš„å…·ä½“å®ç°ï¼šåŒ…æ‹¬è¿æ¥æ± å®ç°æ–¹å¼ï¼Œè¿æ¥æ–¹å¼ï¼Œå¤±è´¥é‡è¿æœºåˆ¶ï¼Œè‡ªåŠ¨é‡è¿æœºåˆ¶ç­‰ã€‚&lt;/p&gt;

&lt;h1 id=&quot;ä¸»è¦structç»“æ„&quot;&gt;ä¸»è¦structç»“æ„&lt;/h1&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/assets/pic/golang/go-redisæ•°æ®ç»“æ„.png&quot; alt=&quot;go-redisæ•°æ®ç»“æ„&quot; /&gt;&lt;/p&gt;

&lt;div data-type=&quot;alignment&quot; data-value=&quot;center&quot; style=&quot;text-align: center;&quot;&gt;
  &lt;div data-type=&quot;p&quot;&gt; å›¾1.1 go-redisä¸»è¦structç»“æ„&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;åœ¨go-redis driverä¸­ä¸»è¦æœ‰ä¸Šé¢å››ä¸ªstruct/interfaceï¼Œè€Œè¿”å›ç»™ç”¨æˆ·ä½¿ç”¨çš„å°±æ˜¯Client structäº†ã€‚Clientæœ‰ä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„æˆå‘˜ï¼Œä¸€ä¸ªæ˜¯baseClientï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯cmdableï¼Œå…¶ä¸­å‰è€…ç»´æŠ¤äº†ä¸€ä¸ªè¿æ¥æ± å¯¹è±¡ä»¥åŠåŸºç¡€æ‰§è¡Œæ–¹æ³•ï¼šprocessâ€”â€”æ‰§è¡Œå•å‘½ä»¤ï¼ŒprocessPipelineâ€”â€”æ‰¹é‡æ‰§è¡Œå‘½ä»¤ï¼ŒprocessTxPipelineâ€”â€”äº‹åŠ¡æ‰¹é‡æ‰§è¡Œå‘½ä»¤ï¼Œè€Œåè€…åˆ™æ˜¯ä¸€ä¸ªæ‹¥æœ‰redisåŸºç¡€å‘½ä»¤functionçš„structã€‚å› ä¸ºé‡‡é›†åªä¼šç”¨åˆ°å•å‘½ä»¤æ¨¡å¼ï¼Œæ‰€ä»¥åé¢åªä¼šè®²åˆ°è¿™ä¸ªå‘½ä»¤ã€‚&lt;/p&gt;
&lt;h1 id=&quot;ä¸»è¦æ–¹æ³•&quot;&gt;ä¸»è¦æ–¹æ³•&lt;/h1&gt;
&lt;h3 id=&quot;åˆå§‹åŒ–&quot;&gt;åˆå§‹åŒ–&lt;/h3&gt;
&lt;p&gt;go-redisåˆå§‹åŒ–æ—¶é‡‡ç”¨çš„lazy initçš„æ–¹å¼ï¼Œå¯¹äºå½“newä¸€ä¸ªclientåï¼Œå¹¶ä¸ä¼šç›´æ¥åˆ›å»ºè¿æ¥ï¼Œè€Œåªæ˜¯åˆå§‹åŒ–ç›¸å…³çš„optionå±æ€§ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ²¡æœ‰ä»»ä½•è¿æ¥çš„client&lt;/p&gt;
&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NewClient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;opt&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Client&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;opt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

       &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;baseClient&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;baseClient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
                     &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;opt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;opt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
                     &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;connPool&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newConnPool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;opt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;baseClient&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

       &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;ä¸Šé¢çš„newConnPoolï¼Œc.baseClient.initå’Œc.initæ–¹æ³•éƒ½åªæ˜¯åˆå§‹åŒ–éœ€è¦çš„ç›¸å…³å±æ€§ï¼Œä¸ä¼šæœ‰ä»»ä½•è¿æ¥çš„å»ºç«‹ã€‚è€ŒnewConnpoolåˆ™æ˜¯åˆ›å»ºå‡ºå¯¹åº”çš„å¯¹è±¡æ± é˜Ÿåˆ—ï¼š&lt;/p&gt;
&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NewConnPool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;opt&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ConnPool&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ConnPool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;opt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;opt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

              &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;     &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;opt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PoolSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;conns&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;     &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Conn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;opt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PoolSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;freeConns&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Conn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;opt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PoolSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;opt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IdleTimeout&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;opt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IdleCheckFrequency&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;go&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reaper&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;opt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IdleCheckFrequency&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœé…ç½®çš„idleTimeoutæˆ–è€…idleCheckFrequncyå‚æ•°ï¼Œé‚£ä¹ˆå°±ä¼šèµ·ä¸€ä¸ªåç¨‹ï¼Œå¯¹ç©ºé—²è¿æ¥è¿›è¡Œreapã€‚åœ¨å¯¹äºæ§åˆ¶è¿æ¥æ± å¤§å°ä¸Šï¼Œè¿™é‡Œä½¿ç”¨äº†queueè¿™ä¸ªchannelï¼Œè¿™æ ·å°±é¿å…äº†å¯¹è®¡æ•°çš„åŸå­æ¯”è¾ƒå’ŒåŠ å‡ï¼Œä¹Ÿå°±é¿å…äº†é”çš„ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ‰§è¡Œæ“ä½œ&quot;&gt;æ‰§è¡Œæ“ä½œ&lt;/h3&gt;
&lt;p&gt;åœ¨æ‰§è¡Œæ“ä½œçš„æ—¶å€™ï¼ŒClientä¼šè°ƒç”¨cmdableå¯¹è±¡æ¥æ‰§è¡Œå¯¹åº”çš„æ“ä½œï¼Œè€Œcmdableä¸­çš„processå¯¹è±¡åˆ™æ˜¯æ¥æºäºbaseClientä¸­çš„connpool&lt;/p&gt;
&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cmdable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Ping&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StatusCmd&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cmd&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NewStatusCmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ping&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cmd&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;é€šè¿‡è¿™ç§æ–¹æ³•ï¼Œå°±å°†è¿æ¥æ± å’Œå‘½ä»¤åˆ†ç¦»å¼€æ¥ï¼Œè¿™æ ·ä¹Ÿå°†å¸¸ç”¨çš„å‘½ä»¤éƒ½å°è£…åœ¨äº†ä¸€èµ·ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å¦‚ä½•è·å–é“¾æ¥&quot;&gt;å¦‚ä½•è·å–é“¾æ¥&lt;/h3&gt;
&lt;p&gt;åœ¨æ¯æ¬¡çœŸæ­£æ‰§è¡Œæ“ä½œä¹‹å‰ï¼Œclientéƒ½ä¼šè°ƒç”¨connpoolçš„Getæ–¹æ³•ï¼Œåœ¨è¿™ä¸ªGetæ–¹æ³•ä¸­å®ç°äº†é“¾æ¥çš„åˆ›å»ºå’Œè·å–ã€‚&lt;/p&gt;
&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;case&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{}{}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
		&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timer&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Timer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
		&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Reset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;opt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PoolTimeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

		&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
		&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;case&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{}{}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
			&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Stop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
				&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
			&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
			&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Put&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
		&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;case&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
			&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Put&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
			&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;atomic&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddUint32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stats&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Timeouts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
			&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ErrPoolTimeout&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
		&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;é¦–å…ˆï¼Œè¿™é‡Œä¼šç»™connPoolåˆå§‹åŒ–æ—¶åˆ›å»ºçš„channelå‘é€ä¸€ä¸ªä¿¡å·ï¼Œå¦‚æœä¿¡å·é˜»å¡äº†ï¼Œè¯´æ˜å½“å‰å·²ç»ç”¨æ»¡è¿æ¥æ± çš„æ‰€æœ‰é“¾æ¥ï¼Œé‚£ä¹ˆæ­¤æ—¶ä¼šåœ¨timeoutæ—¶é—´å†…ï¼Œå°è¯•ç»§ç»­å‘é€ä¿¡å·ï¼Œå¦‚æœè¿˜æ˜¯é˜»å¡ï¼Œåˆ™è¿”å›é”™è¯¯ï¼Œå¦åˆ™å³åˆ»åœæ­¢timerï¼Œè¿›è¡Œåç»­æ“ä½œã€‚åœ¨è¿™é‡Œæœ‰ä¸€ä¸ªç»†èŠ‚æ¯”è¾ƒå¥½ï¼Œå°±æ˜¯timerå¯¹è±¡çš„å¯¹è±¡æ± åŒ–ï¼Œè¿™æ ·å°±ä¸ç”¨é¢‘ç¹åˆ›å»ºç„¶åç­‰gcå»å›æ”¶timerå°å¯¹è±¡äº†ã€‚ä¸è¿‡è¿™ç§ä¼˜åŒ–å¿…é¡»åœ¨è¿æ¥æ± è¢«ç”¨æ»¡çš„æƒ…å†µä¸‹æ•ˆæœæ¯”è¾ƒæ˜æ˜¾ã€‚
è¿˜æœ‰å¼ºè°ƒä¸€ç‚¹çš„å°±æ˜¯ï¼Œè¿™é‡Œå¹¶ä¸è·å–ä»»ä½•è¿æ¥ï¼Œè¿™é‡Œè·å–çš„æ˜¯æ¥ä¸‹æ¥è·å–çœŸæ­£è¿æ¥çš„â€œèµ„æ ¼â€ã€‚
å½“æ‹¿åˆ°è·å–é“¾æ¥çš„â€œèµ„æ ¼â€åï¼Œæ¥ä¸‹æ¥ä¾¿æ˜¯å»è·å–çœŸæ­£çš„é“¾æ¥&lt;/p&gt;
&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;freeConnsMu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Lock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cn&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;popFree&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;freeConnsMu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Unlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

       &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cn&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

       &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IsStale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;opt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IdleTimeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CloseConn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;continue&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

       &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;atomic&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddUint32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stats&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Hits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;è¿™é‡Œå…ˆéå†Clientä¸­free connæ•°ç»„ï¼Œå¦‚æœæ‰¾åˆ°æ²¡æœ‰è¶…è¿‡idleTimeoutçš„é“¾æ¥ï¼Œåˆ™è¿”å›ï¼Œéå†æœŸé—´ï¼Œå¦‚æœæ‰¾åˆ°staleçš„connï¼Œåˆ™ä¼šç›´æ¥closeæ‰ã€‚
è¿™é‡Œé¢å…¶å®æœ‰ä¸ªå¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ï¼Œå› ä¸ºå¦‚æœfreeé˜Ÿåˆ—é‡Œé¢çš„æ‰€æœ‰connéƒ½æ˜¯staleçš„ï¼Œé‚£ä¹ˆåé¢ä¼šéœ€è¦é‡æ–°newï¼Œè€Œè¿™é‡Œå®Œå…¨å¯ä»¥ç•™ä¸‹ä¸€ä¸ªå½“åšæœ¬æ¬¡ä½¿ç”¨ï¼ˆå› ä¸ºè¿™ä¸ªidleTimeoutåªæ˜¯å®¢æˆ·ç«¯çš„timeoutï¼‰ï¼Œç„¶åæ‰¹é‡å…³é—­staleçš„ï¼Œå› ä¸ºcloseæ“ä½œå®ç°åŠ äº†é”ï¼Œè¿™æ ·é”ä½¿ç”¨é‡ä¼šå°‘ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å¦‚ä½•åˆ›å»ºè¿æ¥&quot;&gt;å¦‚ä½•åˆ›å»ºè¿æ¥&lt;/h3&gt;
&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;opt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Dialer&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;net&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Conn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;net&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DialTimeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;opt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Network&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;opt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Addr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;opt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DialTimeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;opt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TLSConfig&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;||&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tls&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;opt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TLSConfig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Handshake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;åˆ›å»ºè¿æ¥ï¼Œå…¶å®ä¹Ÿå°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªtcpè¿æ¥&lt;/p&gt;
&lt;h3 id=&quot;å¦‚ä½•å®ç°å¤±è´¥é‡è¿è‡ªåŠ¨é‡è¿&quot;&gt;å¦‚ä½•å®ç°å¤±è´¥é‡è¿/è‡ªåŠ¨é‡è¿&lt;/h3&gt;
&lt;p&gt;go-redisåœ¨æ¯æ¬¡æ‰§è¡Œå‘½ä»¤å¤±è´¥ä»¥åï¼Œä¼šåˆ¤æ–­å½“å‰å¤±è´¥ç±»å‹ï¼Œå¦‚æœä¸æ˜¯redis serverçš„æŠ¥é”™ä¹Ÿä¸æ˜¯è®¾ç½®ç½‘ç»œtimeoutåçš„timeoutæŠ¥é”™ï¼Œé‚£ä¹ˆåˆ™ä¼šå°†è¯¥è¿æ¥ä»è¿æ¥æ± ä¸­removeæ‰ï¼Œå¦‚æœæœ‰è®¾ç½®é‡è¯•æ¬¡æ•°ï¼Œé‚£ä¹ˆå°±ä¼šç»§ç»­é‡è¯•å‘½ä»¤ï¼Œåˆå› ä¸ºæ¯æ¬¡æ‰§è¡Œå‘½ä»¤æ—¶ä¼šä»è¿æ¥æ± ä¸­è·å–é“¾æ¥ï¼Œè€Œæ²¡æœ‰åˆä¼šæ–°å»ºï¼Œè¿™æ ·å°±å˜ç›¸å®ç°äº†å¤±è´¥é‡è¿/è‡ªåŠ¨é‡è¿æœºåˆ¶ã€‚&lt;/p&gt;
&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;internal&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IsBadConn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;connPool&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Remove&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;connPool&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Put&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;é€šè¿‡è¿™ç§æ–¹å¼ï¼Œåˆå§‹åŒ–å¥½ä¸€ä¸ªredis clientä¹‹åï¼Œä¾¿ä¸ç”¨å†å…³æ³¨é‡è¿é€»è¾‘äº†ã€‚&lt;/p&gt;</content><author><name>Conan</name></author><summary type="html">go-redisè¿æ¥æ± å®ç° èƒŒæ™¯ å› ä¸ºinspectoréœ€è¦æ­£å¼æ¥å…¥redisçš„ç§’çº§ç›‘æ§ï¼Œåœ¨ç§’çº§ç›‘æ§åœºæ™¯ä¸‹ï¼Œå¦‚æœredis driverçš„ä½¿ç”¨æœ‰ä»»ä½•ä¸å½“ï¼Œéƒ½æœ‰å¯èƒ½å¯¼è‡´çº¿ä¸Šæ•…éšœï¼Œæ‰€ä»¥ç‰¹åœ°äº†è§£äº†ä¸€ä¸‹go-redis driverçš„å…·ä½“å®ç°ï¼šåŒ…æ‹¬è¿æ¥æ± å®ç°æ–¹å¼ï¼Œè¿æ¥æ–¹å¼ï¼Œå¤±è´¥é‡è¿æœºåˆ¶ï¼Œè‡ªåŠ¨é‡è¿æœºåˆ¶ç­‰ã€‚</summary></entry></feed>